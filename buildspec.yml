version: 0.2

phases:
  install:
    commands:
      - echo "Starting dependency installation for backend"
      - cd backend
      - npm install
      - echo "Backend dependencies installed"

      - cd ..
      - echo "Starting dependency installation for frontend"
      - cd frontend
      - npm install
      - echo "Frontend dependencies installed"

  build:
    commands:
      - echo "Building frontend"
      - npm run build

      # Move the frontend build files to the backend public directory if needed
      - echo "Moving frontend build files to backend public directory"
      - cp -r build ../backend/public
      - echo "Build and setup complete"

artifacts:
  files:
    - backend/**/*
    - frontend/build/**/* # Include frontend build files if needed
