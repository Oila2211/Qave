{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Afriqana/frontend/src/screens/OrderScreen.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useCreateOrderMutation } from \"../slices/ordersApiSlice\";\nimport { Elements, CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\nconst PlaceOrderScreen = () => {\n  _s();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const cart = useSelector(state => state.cart); // assuming you have cart details in your redux store\n  const {\n    cartItems,\n    deliveryAddress,\n    paymentMethod,\n    itemsPrice,\n    taxPrice,\n    deliveryPrice,\n    totalPrice\n  } = cart;\n  const [createOrder] = useCreateOrderMutation();\n  const stripe = useStripe();\n  const elements = useElements();\n  const placeOrderHandler = async () => {\n    if (!stripe || !elements) {\n      return;\n    }\n    const card = elements.getElement(CardElement);\n    const result = await stripe.createToken(card);\n    if (result.error) {\n      console.error(result.error.message);\n    } else {\n      try {\n        await createOrder({\n          orderItems: cartItems,\n          deliveryAddress,\n          paymentMethod,\n          itemsPrice,\n          taxPrice,\n          deliveryPrice,\n          totalPrice,\n          stripeToken: result.token.id\n        });\n        history.push('/order-success'); // navigate to a successful order screen or confirmation screen\n      } catch (error) {\n        console.error(\"Error placing the order:\", error);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Place Order\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Order Items\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), cartItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [item.name, \" - \", item.price]\n      }, item._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Summary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Items Price: $\", itemsPrice]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Tax: $\", taxPrice]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Delivery: $\", deliveryPrice]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Total: $\", totalPrice]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Elements, {\n        stripe: stripePromise,\n        children: [/*#__PURE__*/_jsxDEV(CardElement, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: placeOrderHandler,\n          children: \"Pay Now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n_s(PlaceOrderScreen, \"g2DjMMg6dv3bflNS4LWYnvJHbyc=\", true, function () {\n  return [useDispatch, useSelector, useCreateOrderMutation, useStripe, useElements];\n});\n_c = PlaceOrderScreen;\nexport default PlaceOrderScreen;\nvar _c;\n$RefreshReg$(_c, \"PlaceOrderScreen\");","map":{"version":3,"names":["useState","useEffect","useDispatch","useSelector","useCreateOrderMutation","Elements","CardElement","useStripe","useElements","loadStripe","jsxDEV","_jsxDEV","stripePromise","process","env","REACT_APP_STRIPE_PUBLISHABLE_KEY","PlaceOrderScreen","_s","dispatch","history","useHistory","cart","state","cartItems","deliveryAddress","paymentMethod","itemsPrice","taxPrice","deliveryPrice","totalPrice","createOrder","stripe","elements","placeOrderHandler","card","getElement","result","createToken","error","console","message","orderItems","stripeToken","token","id","push","children","fileName","_jsxFileName","lineNumber","columnNumber","map","item","name","price","_id","onClick","_c","$RefreshReg$"],"sources":["/Users/mac/Afriqana/frontend/src/screens/OrderScreen.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useCreateOrderMutation } from \"../slices/ordersApiSlice\";\n\nimport { Elements, CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\n\n\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\n\nconst PlaceOrderScreen = () => {\n    const dispatch = useDispatch();\n    const history = useHistory();\n    \n    const cart = useSelector(state => state.cart);  // assuming you have cart details in your redux store\n    const { cartItems, deliveryAddress, paymentMethod, itemsPrice, taxPrice, deliveryPrice, totalPrice } = cart;\n    \n    const [createOrder] = useCreateOrderMutation();\n\n    const stripe = useStripe();\n    const elements = useElements();\n\n    const placeOrderHandler = async () => {\n        if (!stripe || !elements) {\n            return;\n        }\n        const card = elements.getElement(CardElement);\n        const result = await stripe.createToken(card);\n        if (result.error) {\n            console.error(result.error.message);\n        } else {\n            try {\n                await createOrder({\n                    orderItems: cartItems,\n                    deliveryAddress,\n                    paymentMethod,\n                    itemsPrice,\n                    taxPrice,\n                    deliveryPrice,\n                    totalPrice,\n                    stripeToken: result.token.id\n                });\n                history.push('/order-success');  // navigate to a successful order screen or confirmation screen\n            } catch (error) {\n                console.error(\"Error placing the order:\", error);\n            }\n        }\n    };\n\n    return (\n        <div>\n            <h1>Place Order</h1>\n            <div>\n                <h2>Order Items</h2>\n                {cartItems.map(item => (\n                    <div key={item._id}>\n                        {item.name} - {item.price}\n                    </div>\n                ))}\n            </div>\n            <div>\n                <h2>Summary</h2>\n                <p>Items Price: ${itemsPrice}</p>\n                <p>Tax: ${taxPrice}</p>\n                <p>Delivery: ${deliveryPrice}</p>\n                <p><strong>Total: ${totalPrice}</strong></p>\n            </div>\n            <div>\n                <h2>Payment</h2>\n                <Elements stripe={stripePromise}>\n                    <CardElement />\n                    <button onClick={placeOrderHandler}>Pay Now</button>\n                </Elements>\n            </div>\n        </div>\n    );\n}\n\nexport default PlaceOrderScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}